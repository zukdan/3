{"ast":null,"code":"// src/components/LabelManager.js\nimport React,{useState,useCallback}from'react';import{LabelManagerContainer,LabelList,LabelItem,AddLabelButton,LabelInput,DeleteLabelButton}from'./LabelManager.styles';import styled from'styled-components';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LabelManager(_ref){let{data,setData,selectedCard,setSelectedCard}=_ref;const[newLabelName,setNewLabelName]=useState('');const[newLabelColor,setNewLabelColor]=useState('#ccc');const handleAddLabel=useCallback(()=>{if(!selectedCard)return;// Проверяем, выбрана ли карточка\n// Логика добавления новой метки в состояние data\nconst newLabel={id:Math.random().toString(36).substring(7),// Генерация случайного ID\nname:newLabelName,color:newLabelColor};setData(prevData=>({...prevData,labels:[...(prevData.labels||[]),newLabel]}));setNewLabelName('');setNewLabelColor('#ccc');},[newLabelName,newLabelColor,setData,selectedCard]);// Добавляем selectedCard в зависимости\nconst handleAssignLabel=useCallback(labelId=>{if(!selectedCard)return;// Логика привязки метки к выбранной карточке\nsetData(prevData=>{const updatedLists=prevData.lists.map(list=>({...list,cards:list.cards.map(card=>{if(card.id===selectedCard.id){const newLabels=card.labels?[...card.labels,labelId]:[labelId];return{...card,labels:newLabels};}return card;})}));return{...prevData,lists:updatedLists};});},[selectedCard,setData]);const handleUnassignLabel=useCallback(labelId=>{if(!selectedCard)return;// Логика отвязки метки от выбранной карточки\nsetData(prevData=>{const updatedLists=prevData.lists.map(list=>({...list,cards:list.cards.map(card=>{if(card.id===selectedCard.id){const newLabels=card.labels?card.labels.filter(id=>id!==labelId):[];return{...card,labels:newLabels};}return card;})}));return{...prevData,lists:updatedLists};});},[selectedCard,setData]);const isLabelAssigned=useCallback(labelId=>{return selectedCard&&selectedCard.labels&&selectedCard.labels.includes(labelId);},[selectedCard]);const handleDeleteLabel=useCallback(labelId=>{setData(prevData=>({...prevData,labels:prevData.labels.filter(label=>label.id!==labelId),lists:prevData.lists.map(list=>({...list,cards:list.cards.map(card=>({...card,labels:card.labels?card.labels.filter(id=>id!==labelId):[]}))}))}));},[setData]);return/*#__PURE__*/_jsxs(LabelManagerContainer,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0423\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043C\\u0435\\u0442\\u043A\\u0430\\u043C\\u0438\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(LabelInput,{type:\"text\",placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043C\\u0435\\u0442\\u043A\\u0438\",value:newLabelName,onChange:e=>setNewLabelName(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"color\",value:newLabelColor,onChange:e=>setNewLabelColor(e.target.value)}),/*#__PURE__*/_jsx(AddLabelButton,{onClick:handleAddLabel,disabled:!selectedCard,children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043C\\u0435\\u0442\\u043A\\u0443\"})]}),/*#__PURE__*/_jsx(LabelList,{children:data.labels&&data.labels.map(label=>/*#__PURE__*/_jsxs(LabelItem,{color:label.color,onClick:()=>{isLabelAssigned(label.id)?handleUnassignLabel(label.id):handleAssignLabel(label.id);},assigned:isLabelAssigned(label.id),disabled:!selectedCard,children:[label.name,/*#__PURE__*/_jsx(DeleteLabelButton,{onClick:e=>{e.stopPropagation();// Предотвращаем вызов handleAssignLabel\nhandleDeleteLabel(label.id);},children:\"X\"})]},label.id))})]});}export default LabelManager;","map":{"version":3,"names":["React","useState","useCallback","LabelManagerContainer","LabelList","LabelItem","AddLabelButton","LabelInput","DeleteLabelButton","styled","jsx","_jsx","jsxs","_jsxs","LabelManager","_ref","data","setData","selectedCard","setSelectedCard","newLabelName","setNewLabelName","newLabelColor","setNewLabelColor","handleAddLabel","newLabel","id","Math","random","toString","substring","name","color","prevData","labels","handleAssignLabel","labelId","updatedLists","lists","map","list","cards","card","newLabels","handleUnassignLabel","filter","isLabelAssigned","includes","handleDeleteLabel","label","children","type","placeholder","value","onChange","e","target","onClick","disabled","assigned","stopPropagation"],"sources":["C:/Users/zulda/Desktop/5/src/components/LabelManager.js"],"sourcesContent":["// src/components/LabelManager.js\r\nimport React, { useState, useCallback } from 'react';\r\nimport { LabelManagerContainer, LabelList, LabelItem, AddLabelButton, LabelInput , DeleteLabelButton} from './LabelManager.styles';\r\nimport styled from 'styled-components';\r\n\r\n\r\n\r\nfunction LabelManager({ data, setData, selectedCard, setSelectedCard }) {\r\n  const [newLabelName, setNewLabelName] = useState('');\r\n  const [newLabelColor, setNewLabelColor] = useState('#ccc');\r\n\r\n  const handleAddLabel = useCallback(() => {\r\n    if (!selectedCard) return; // Проверяем, выбрана ли карточка\r\n\r\n    // Логика добавления новой метки в состояние data\r\n    const newLabel = {\r\n      id: Math.random().toString(36).substring(7), // Генерация случайного ID\r\n      name: newLabelName,\r\n      color: newLabelColor,\r\n    };\r\n\r\n    setData(prevData => ({\r\n      ...prevData,\r\n      labels: [...(prevData.labels || []), newLabel],\r\n    }));\r\n    setNewLabelName('');\r\n    setNewLabelColor('#ccc');\r\n  }, [newLabelName, newLabelColor, setData, selectedCard]); // Добавляем selectedCard в зависимости\r\n\r\n  const handleAssignLabel = useCallback((labelId) => {\r\n    if (!selectedCard) return;\r\n\r\n    // Логика привязки метки к выбранной карточке\r\n    setData(prevData => {\r\n      const updatedLists = prevData.lists.map(list => ({\r\n        ...list,\r\n        cards: list.cards.map(card => {\r\n          if (card.id === selectedCard.id) {\r\n            const newLabels = card.labels ? [...card.labels, labelId] : [labelId];\r\n            return { ...card, labels: newLabels };\r\n          }\r\n          return card;\r\n        }),\r\n      }));\r\n      return { ...prevData, lists: updatedLists };\r\n    });\r\n\r\n  }, [selectedCard, setData]);\r\n\r\n  const handleUnassignLabel = useCallback((labelId) => {\r\n    if (!selectedCard) return;\r\n\r\n    // Логика отвязки метки от выбранной карточки\r\n    setData(prevData => {\r\n      const updatedLists = prevData.lists.map(list => ({\r\n        ...list,\r\n        cards: list.cards.map(card => {\r\n          if (card.id === selectedCard.id) {\r\n            const newLabels = card.labels ? card.labels.filter(id => id !== labelId) : [];\r\n            return { ...card, labels: newLabels };\r\n          }\r\n          return card;\r\n        }),\r\n      }));\r\n      return { ...prevData, lists: updatedLists };\r\n    });\r\n  }, [selectedCard, setData]);\r\n\r\n  const isLabelAssigned = useCallback((labelId) => {\r\n    return selectedCard && selectedCard.labels && selectedCard.labels.includes(labelId);\r\n  }, [selectedCard]);\r\n\r\n  const handleDeleteLabel = useCallback((labelId) => {\r\n    setData(prevData => ({\r\n      ...prevData,\r\n      labels: prevData.labels.filter(label => label.id !== labelId),\r\n      lists: prevData.lists.map(list => ({\r\n        ...list,\r\n        cards: list.cards.map(card => ({\r\n          ...card,\r\n          labels: card.labels ? card.labels.filter(id => id !== labelId) : [],\r\n        })),\r\n      })),\r\n    }));\r\n  }, [setData]);\r\n\r\n  return (\r\n    <LabelManagerContainer>\r\n      <h3>Управление метками</h3>\r\n      <div>\r\n        <LabelInput\r\n          type=\"text\"\r\n          placeholder=\"Название метки\"\r\n          value={newLabelName}\r\n          onChange={(e) => setNewLabelName(e.target.value)}\r\n        />\r\n        <input\r\n          type=\"color\"\r\n          value={newLabelColor}\r\n          onChange={(e) => setNewLabelColor(e.target.value)}\r\n        />\r\n        <AddLabelButton onClick={handleAddLabel} disabled={!selectedCard}>Добавить метку</AddLabelButton>\r\n      </div>\r\n      <LabelList>\r\n        {data.labels && data.labels.map((label) => (\r\n          <LabelItem\r\n            key={label.id}\r\n            color={label.color}\r\n            onClick={() => {\r\n              isLabelAssigned(label.id) ? handleUnassignLabel(label.id) : handleAssignLabel(label.id)\r\n            }}\r\n            assigned={isLabelAssigned(label.id)}\r\n            disabled={!selectedCard}\r\n          >\r\n            {label.name}\r\n            <DeleteLabelButton onClick={(e) => {\r\n              e.stopPropagation(); // Предотвращаем вызов handleAssignLabel\r\n              handleDeleteLabel(label.id);\r\n            }}>\r\n              X\r\n            </DeleteLabelButton>\r\n          </LabelItem>\r\n        ))}\r\n      </LabelList>\r\n    </LabelManagerContainer>\r\n  );\r\n}\r\n\r\nexport default LabelManager;"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,WAAW,KAAQ,OAAO,CACpD,OAASC,qBAAqB,CAAEC,SAAS,CAAEC,SAAS,CAAEC,cAAc,CAAEC,UAAU,CAAGC,iBAAiB,KAAO,uBAAuB,CAClI,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAIvC,QAAS,CAAAC,YAAYA,CAAAC,IAAA,CAAmD,IAAlD,CAAEC,IAAI,CAAEC,OAAO,CAAEC,YAAY,CAAEC,eAAgB,CAAC,CAAAJ,IAAA,CACpE,KAAM,CAACK,YAAY,CAAEC,eAAe,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACqB,aAAa,CAAEC,gBAAgB,CAAC,CAAGtB,QAAQ,CAAC,MAAM,CAAC,CAE1D,KAAM,CAAAuB,cAAc,CAAGtB,WAAW,CAAC,IAAM,CACvC,GAAI,CAACgB,YAAY,CAAE,OAAQ;AAE3B;AACA,KAAM,CAAAO,QAAQ,CAAG,CACfC,EAAE,CAAEC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,SAAS,CAAC,CAAC,CAAC,CAAE;AAC7CC,IAAI,CAAEX,YAAY,CAClBY,KAAK,CAAEV,aACT,CAAC,CAEDL,OAAO,CAACgB,QAAQ,GAAK,CACnB,GAAGA,QAAQ,CACXC,MAAM,CAAE,CAAC,IAAID,QAAQ,CAACC,MAAM,EAAI,EAAE,CAAC,CAAET,QAAQ,CAC/C,CAAC,CAAC,CAAC,CACHJ,eAAe,CAAC,EAAE,CAAC,CACnBE,gBAAgB,CAAC,MAAM,CAAC,CAC1B,CAAC,CAAE,CAACH,YAAY,CAAEE,aAAa,CAAEL,OAAO,CAAEC,YAAY,CAAC,CAAC,CAAE;AAE1D,KAAM,CAAAiB,iBAAiB,CAAGjC,WAAW,CAAEkC,OAAO,EAAK,CACjD,GAAI,CAAClB,YAAY,CAAE,OAEnB;AACAD,OAAO,CAACgB,QAAQ,EAAI,CAClB,KAAM,CAAAI,YAAY,CAAGJ,QAAQ,CAACK,KAAK,CAACC,GAAG,CAACC,IAAI,GAAK,CAC/C,GAAGA,IAAI,CACPC,KAAK,CAAED,IAAI,CAACC,KAAK,CAACF,GAAG,CAACG,IAAI,EAAI,CAC5B,GAAIA,IAAI,CAAChB,EAAE,GAAKR,YAAY,CAACQ,EAAE,CAAE,CAC/B,KAAM,CAAAiB,SAAS,CAAGD,IAAI,CAACR,MAAM,CAAG,CAAC,GAAGQ,IAAI,CAACR,MAAM,CAAEE,OAAO,CAAC,CAAG,CAACA,OAAO,CAAC,CACrE,MAAO,CAAE,GAAGM,IAAI,CAAER,MAAM,CAAES,SAAU,CAAC,CACvC,CACA,MAAO,CAAAD,IAAI,CACb,CAAC,CACH,CAAC,CAAC,CAAC,CACH,MAAO,CAAE,GAAGT,QAAQ,CAAEK,KAAK,CAAED,YAAa,CAAC,CAC7C,CAAC,CAAC,CAEJ,CAAC,CAAE,CAACnB,YAAY,CAAED,OAAO,CAAC,CAAC,CAE3B,KAAM,CAAA2B,mBAAmB,CAAG1C,WAAW,CAAEkC,OAAO,EAAK,CACnD,GAAI,CAAClB,YAAY,CAAE,OAEnB;AACAD,OAAO,CAACgB,QAAQ,EAAI,CAClB,KAAM,CAAAI,YAAY,CAAGJ,QAAQ,CAACK,KAAK,CAACC,GAAG,CAACC,IAAI,GAAK,CAC/C,GAAGA,IAAI,CACPC,KAAK,CAAED,IAAI,CAACC,KAAK,CAACF,GAAG,CAACG,IAAI,EAAI,CAC5B,GAAIA,IAAI,CAAChB,EAAE,GAAKR,YAAY,CAACQ,EAAE,CAAE,CAC/B,KAAM,CAAAiB,SAAS,CAAGD,IAAI,CAACR,MAAM,CAAGQ,IAAI,CAACR,MAAM,CAACW,MAAM,CAACnB,EAAE,EAAIA,EAAE,GAAKU,OAAO,CAAC,CAAG,EAAE,CAC7E,MAAO,CAAE,GAAGM,IAAI,CAAER,MAAM,CAAES,SAAU,CAAC,CACvC,CACA,MAAO,CAAAD,IAAI,CACb,CAAC,CACH,CAAC,CAAC,CAAC,CACH,MAAO,CAAE,GAAGT,QAAQ,CAAEK,KAAK,CAAED,YAAa,CAAC,CAC7C,CAAC,CAAC,CACJ,CAAC,CAAE,CAACnB,YAAY,CAAED,OAAO,CAAC,CAAC,CAE3B,KAAM,CAAA6B,eAAe,CAAG5C,WAAW,CAAEkC,OAAO,EAAK,CAC/C,MAAO,CAAAlB,YAAY,EAAIA,YAAY,CAACgB,MAAM,EAAIhB,YAAY,CAACgB,MAAM,CAACa,QAAQ,CAACX,OAAO,CAAC,CACrF,CAAC,CAAE,CAAClB,YAAY,CAAC,CAAC,CAElB,KAAM,CAAA8B,iBAAiB,CAAG9C,WAAW,CAAEkC,OAAO,EAAK,CACjDnB,OAAO,CAACgB,QAAQ,GAAK,CACnB,GAAGA,QAAQ,CACXC,MAAM,CAAED,QAAQ,CAACC,MAAM,CAACW,MAAM,CAACI,KAAK,EAAIA,KAAK,CAACvB,EAAE,GAAKU,OAAO,CAAC,CAC7DE,KAAK,CAAEL,QAAQ,CAACK,KAAK,CAACC,GAAG,CAACC,IAAI,GAAK,CACjC,GAAGA,IAAI,CACPC,KAAK,CAAED,IAAI,CAACC,KAAK,CAACF,GAAG,CAACG,IAAI,GAAK,CAC7B,GAAGA,IAAI,CACPR,MAAM,CAAEQ,IAAI,CAACR,MAAM,CAAGQ,IAAI,CAACR,MAAM,CAACW,MAAM,CAACnB,EAAE,EAAIA,EAAE,GAAKU,OAAO,CAAC,CAAG,EACnE,CAAC,CAAC,CACJ,CAAC,CAAC,CACJ,CAAC,CAAC,CAAC,CACL,CAAC,CAAE,CAACnB,OAAO,CAAC,CAAC,CAEb,mBACEJ,KAAA,CAACV,qBAAqB,EAAA+C,QAAA,eACpBvC,IAAA,OAAAuC,QAAA,CAAI,yGAAkB,CAAI,CAAC,cAC3BrC,KAAA,QAAAqC,QAAA,eACEvC,IAAA,CAACJ,UAAU,EACT4C,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,iFAAgB,CAC5BC,KAAK,CAAEjC,YAAa,CACpBkC,QAAQ,CAAGC,CAAC,EAAKlC,eAAe,CAACkC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAClD,CAAC,cACF1C,IAAA,UACEwC,IAAI,CAAC,OAAO,CACZE,KAAK,CAAE/B,aAAc,CACrBgC,QAAQ,CAAGC,CAAC,EAAKhC,gBAAgB,CAACgC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CACnD,CAAC,cACF1C,IAAA,CAACL,cAAc,EAACmD,OAAO,CAAEjC,cAAe,CAACkC,QAAQ,CAAE,CAACxC,YAAa,CAAAgC,QAAA,CAAC,iFAAc,CAAgB,CAAC,EAC9F,CAAC,cACNvC,IAAA,CAACP,SAAS,EAAA8C,QAAA,CACPlC,IAAI,CAACkB,MAAM,EAAIlB,IAAI,CAACkB,MAAM,CAACK,GAAG,CAAEU,KAAK,eACpCpC,KAAA,CAACR,SAAS,EAER2B,KAAK,CAAEiB,KAAK,CAACjB,KAAM,CACnByB,OAAO,CAAEA,CAAA,GAAM,CACbX,eAAe,CAACG,KAAK,CAACvB,EAAE,CAAC,CAAGkB,mBAAmB,CAACK,KAAK,CAACvB,EAAE,CAAC,CAAGS,iBAAiB,CAACc,KAAK,CAACvB,EAAE,CAAC,CACzF,CAAE,CACFiC,QAAQ,CAAEb,eAAe,CAACG,KAAK,CAACvB,EAAE,CAAE,CACpCgC,QAAQ,CAAE,CAACxC,YAAa,CAAAgC,QAAA,EAEvBD,KAAK,CAAClB,IAAI,cACXpB,IAAA,CAACH,iBAAiB,EAACiD,OAAO,CAAGF,CAAC,EAAK,CACjCA,CAAC,CAACK,eAAe,CAAC,CAAC,CAAE;AACrBZ,iBAAiB,CAACC,KAAK,CAACvB,EAAE,CAAC,CAC7B,CAAE,CAAAwB,QAAA,CAAC,GAEH,CAAmB,CAAC,GAdfD,KAAK,CAACvB,EAeF,CACZ,CAAC,CACO,CAAC,EACS,CAAC,CAE5B,CAEA,cAAe,CAAAZ,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}