{"ast":null,"code":"import React,{useState,useCallback}from'react';import{CardContainer,CardText,CardDescription,DeleteCardButton,CheckboxContainer,Checkbox,LabelsContainer,Label,DeleteLabelButton,ArrowButton}from'./Card.styles';import styled from'styled-components';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Card(_ref){let{card,listId,onTextChange,onDescriptionChange,onDeleteCard,setSelectedCard,data,moveCard,prevListId,nextListId,moveCardTop,moveCardBottom,onUnassignLabel}=_ref;const[text,setText]=useState(card.text);const[description,setDescription]=useState(card.description);const[isEditingText,setIsEditingText]=useState(false);const[isEditingDescription,setIsEditingDescription]=useState(false);const[isChecked,setIsChecked]=useState(false);const handleTextChange=useCallback(e=>{setText(e.target.value);},[]);const handleDescriptionChange=useCallback(e=>{setDescription(e.target.value);},[]);const handleTextBlur=useCallback(()=>{setIsEditingText(false);onTextChange(listId,card.id,text);},[card.id,listId,text,onTextChange]);const handleDescriptionBlur=useCallback(()=>{setIsEditingDescription(false);onDescriptionChange(listId,card.id,description);},[card.id,listId,description,onDescriptionChange]);const handleTextClick=useCallback(()=>{setIsEditingText(true);},[]);const handleDescriptionClick=useCallback(()=>{setIsEditingDescription(true);},[]);const handleCheckboxChange=useCallback(e=>{const checked=e.target.checked;setIsChecked(checked);setSelectedCard(checked?card:null);// Обновляем selectedCard только при изменении чекбокса\n},[card,setSelectedCard]);return/*#__PURE__*/_jsxs(CardContainer,{children:[/*#__PURE__*/_jsxs(CheckboxContainer,{children:[/*#__PURE__*/_jsx(Checkbox,{type:\"checkbox\",checked:isChecked,onChange:handleCheckboxChange}),/*#__PURE__*/_jsx(\"label\",{children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u043C\\u0435\\u0442\\u043A\\u0438\"})]}),isEditingText?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:text,onChange:handleTextChange,onBlur:handleTextBlur,autoFocus:true}):/*#__PURE__*/_jsx(CardText,{onClick:handleTextClick,children:text}),isEditingDescription?/*#__PURE__*/_jsx(CardDescription,{value:description,onChange:handleDescriptionChange,onBlur:handleDescriptionBlur}):/*#__PURE__*/_jsx(CardText,{onClick:handleDescriptionClick,children:description}),/*#__PURE__*/_jsx(LabelsContainer,{children:card.labels&&card.labels.map(labelId=>{const label=data.labels.find(l=>l.id===labelId);return label?/*#__PURE__*/_jsxs(Label,{color:label.color,children:[label.name,/*#__PURE__*/_jsx(DeleteLabelButton,{onClick:e=>{e.stopPropagation();// Предотвращаем выделение карточки\nonUnassignLabel(listId,card.id,labelId);},children:\"X\"})]},label.id):null;})}),/*#__PURE__*/_jsx(ArrowButton,{onClick:()=>moveCard(card.id,listId,null,prevListId),disabled:!prevListId,children:\"\\u25C0\"}),/*#__PURE__*/_jsx(ArrowButton,{onClick:()=>moveCard(card.id,listId,null,nextListId),disabled:!nextListId,children:\"\\u25B6\"}),/*#__PURE__*/_jsx(ArrowButton,{onClick:()=>moveCard(card.id,listId,null,listId,'up'),disabled:false,children:\"\\u25B2\"}),/*#__PURE__*/_jsx(ArrowButton,{onClick:()=>moveCard(card.id,listId,null,listId,'down'),disabled:false,children:\"\\u25BC\"}),/*#__PURE__*/_jsx(DeleteCardButton,{onClick:()=>onDeleteCard(listId,card.id),children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u043A\\u0430\\u0440\\u0442\\u043E\\u0447\\u043A\\u0443\"})]});}export default Card;","map":{"version":3,"names":["React","useState","useCallback","CardContainer","CardText","CardDescription","DeleteCardButton","CheckboxContainer","Checkbox","LabelsContainer","Label","DeleteLabelButton","ArrowButton","styled","jsx","_jsx","jsxs","_jsxs","Card","_ref","card","listId","onTextChange","onDescriptionChange","onDeleteCard","setSelectedCard","data","moveCard","prevListId","nextListId","moveCardTop","moveCardBottom","onUnassignLabel","text","setText","description","setDescription","isEditingText","setIsEditingText","isEditingDescription","setIsEditingDescription","isChecked","setIsChecked","handleTextChange","e","target","value","handleDescriptionChange","handleTextBlur","id","handleDescriptionBlur","handleTextClick","handleDescriptionClick","handleCheckboxChange","checked","children","type","onChange","onBlur","autoFocus","onClick","labels","map","labelId","label","find","l","color","name","stopPropagation","disabled"],"sources":["C:/Users/zulda/Desktop/5/src/components/Card.js"],"sourcesContent":["import React, { useState, useCallback } from 'react';\r\nimport { CardContainer, CardText, CardDescription, DeleteCardButton ,CheckboxContainer,Checkbox ,LabelsContainer,Label, DeleteLabelButton ,ArrowButton} from './Card.styles';\r\nimport styled from 'styled-components';\r\n\r\nfunction Card({ card, listId, onTextChange, onDescriptionChange, onDeleteCard, setSelectedCard, data, moveCard, prevListId, nextListId, moveCardTop, moveCardBottom, onUnassignLabel }) {\r\n    const [text, setText] = useState(card.text);\r\n    const [description, setDescription] = useState(card.description);\r\n    const [isEditingText, setIsEditingText] = useState(false);\r\n    const [isEditingDescription, setIsEditingDescription] = useState(false);\r\n    const [isChecked, setIsChecked] = useState(false);\r\n\r\n    const handleTextChange = useCallback((e) => {\r\n        setText(e.target.value);\r\n    }, []);\r\n\r\n    const handleDescriptionChange = useCallback((e) => {\r\n        setDescription(e.target.value);\r\n    }, []);\r\n\r\n    const handleTextBlur = useCallback(() => {\r\n        setIsEditingText(false);\r\n        onTextChange(listId, card.id, text);\r\n    }, [card.id, listId, text, onTextChange]);\r\n\r\n    const handleDescriptionBlur = useCallback(() => {\r\n        setIsEditingDescription(false);\r\n        onDescriptionChange(listId, card.id, description);\r\n    }, [card.id, listId, description, onDescriptionChange]);\r\n\r\n    const handleTextClick = useCallback(() => {\r\n        setIsEditingText(true);\r\n    }, []);\r\n\r\n    const handleDescriptionClick = useCallback(() => {\r\n        setIsEditingDescription(true);\r\n    }, []);\r\n\r\n    const handleCheckboxChange = useCallback((e) => {\r\n        const checked = e.target.checked;\r\n        setIsChecked(checked);\r\n        setSelectedCard(checked ? card : null); // Обновляем selectedCard только при изменении чекбокса\r\n    }, [card, setSelectedCard]);\r\n\r\n    return (\r\n        <CardContainer>\r\n            <CheckboxContainer>\r\n                <Checkbox\r\n                    type=\"checkbox\"\r\n                    checked={isChecked}\r\n                    onChange={handleCheckboxChange}\r\n                />\r\n                <label>Изменить метки</label>\r\n            </CheckboxContainer>\r\n            {isEditingText ? (\r\n                <input\r\n                    type=\"text\"\r\n                    value={text}\r\n                    onChange={handleTextChange}\r\n                    onBlur={handleTextBlur}\r\n                    autoFocus\r\n                />\r\n            ) : (\r\n                <CardText onClick={handleTextClick}>\r\n                    {text}\r\n                </CardText>\r\n            )}\r\n            {isEditingDescription ? (\r\n                <CardDescription\r\n                    value={description}\r\n                    onChange={handleDescriptionChange}\r\n                    onBlur={handleDescriptionBlur}\r\n                />\r\n            ) : (\r\n                <CardText onClick={handleDescriptionClick}>\r\n                    {description}\r\n                </CardText>\r\n            )}\r\n            <LabelsContainer>\r\n                {card.labels && card.labels.map(labelId => {\r\n                    const label = data.labels.find(l => l.id === labelId);\r\n                    return label ? (\r\n                        <Label key={label.id} color={label.color}>\r\n                            {label.name}\r\n                            <DeleteLabelButton\r\n                                onClick={(e) => {\r\n                                    e.stopPropagation(); // Предотвращаем выделение карточки\r\n                                    onUnassignLabel(listId, card.id, labelId);\r\n                                }}\r\n                            >\r\n                                X\r\n                            </DeleteLabelButton>\r\n                        </Label>\r\n                    ) : null;\r\n                })}\r\n            </LabelsContainer>\r\n            <ArrowButton\r\n                onClick={() => moveCard(card.id, listId, null, prevListId)}\r\n                disabled={!prevListId}\r\n            >\r\n                &#9664;\r\n            </ArrowButton>\r\n            <ArrowButton\r\n                onClick={() => moveCard(card.id, listId, null, nextListId)}\r\n                disabled={!nextListId}\r\n            >\r\n                &#9654;\r\n            </ArrowButton>\r\n            <ArrowButton onClick={() => moveCard(card.id, listId, null, listId, 'up')}\r\n                disabled={false}>&#9650;</ArrowButton>\r\n            <ArrowButton onClick={() => moveCard(card.id, listId, null, listId, 'down')}\r\n                disabled={false}>&#9660;</ArrowButton>\r\n            <DeleteCardButton onClick={() => onDeleteCard(listId, card.id)}>Удалить карточку</DeleteCardButton>\r\n        </CardContainer>\r\n    );\r\n}\r\n\r\nexport default Card;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}